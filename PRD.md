è¿™æ˜¯ä¸€ä»½ç»è¿‡æ·±åº¦æ‰“ç£¨ã€èåˆäº†äº§å“æ€ç»´ä¸æŠ€æœ¯å®ç°çš„æœ€ç»ˆç‰ˆ **MVP äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)**ã€‚

è¿™ä»½æ–‡æ¡£ä¸ä»…åŒ…å«äº†åŠŸèƒ½å®šä¹‰ï¼Œè¿˜èå…¥äº†æˆ‘ä»¬åˆšæ‰è®¨è®ºçš„**ç§»åŠ¨ç«¯é€‚é…**ã€**å›¾ç‰‡å­—æ®µ**ã€**å¯†ç é‡ç½®ç­–ç•¥**ä»¥åŠ**Vercel ç»Ÿä¸€éƒ¨ç½²**æ¶æ„ã€‚

æ‚¨å¯ä»¥ç›´æ¥å°†ä¸‹æ–¹å†…å®¹ä¿å­˜ä¸º `PRD.md`ï¼Œå®ƒå°±æ˜¯æ‚¨å¼€å‘è¿‡ç¨‹ä¸­çš„â€œå”¯ä¸€çœŸç†æ¥æºâ€ã€‚

---

# ğŸ“ AI æç¤ºè¯åº“ (Prompt Library) - MVP äº§å“éœ€æ±‚æ–‡æ¡£

| æ–‡æ¡£ç‰ˆæœ¬ | ä¿®æ”¹æ—¥æœŸ | çŠ¶æ€ | è´Ÿè´£äºº |
| --- | --- | --- | --- |
| **v2.0 (Final)** | 2025-12-xx | å¾…å¼€å‘ | Owner |

## 1. é¡¹ç›®æ¦‚è§ˆ (Project Overview)

### 1.1 æ ¸å¿ƒä»·å€¼

æœ¬é¡¹ç›®æ˜¯â€œä¸‰å¥—èµ„äº§â€æˆ˜ç•¥ä¸­çš„ç¬¬ä¸€ç¯ï¼ˆæµé‡é’©å­ï¼‰ã€‚

* **å¯¹ç”¨æˆ·**ï¼šæä¾›ä¸€ä¸ªæ— å¹¿å‘Šã€æœç´¢å¿«ã€ç»“æ„åŒ–æ¸…æ™°çš„é«˜è´¨é‡ AI æç¤ºè¯æŸ¥é˜…å·¥å…·ã€‚
* **å¯¹ä½œè€…**ï¼šé€šè¿‡â€œç¨‹åºå‘˜å¼€å‘çš„å·¥å…·â€è¿™ä¸€å·®å¼‚åŒ–å®šä½ï¼Œå»ºç«‹ä¿¡ä»»ï¼Œæ²‰æ·€ç§åŸŸæµé‡ï¼Œä¸ºåç»­å˜ç°é“ºè·¯ã€‚

### 1.2 æ ¸å¿ƒä½“éªŒåŸåˆ™

1. **Mobile First (ç§»åŠ¨ç«¯ä¼˜å…ˆ)**ï¼š90% çš„æµé‡æ¥è‡ªæ‰‹æœºï¼Œå¿…é¡»ä¿è¯ç§»åŠ¨ç«¯æ“ä½œï¼ˆç‰¹åˆ«æ˜¯å¤åˆ¶ï¼‰æå…¶é¡ºæ»‘ã€‚
2. **æé€ŸåŠ è½½**ï¼šåˆ©ç”¨ Next.js SSG/SSR æŠ€æœ¯ï¼Œç§’å¼€é¡µé¢ï¼ŒSEO å‹å¥½ã€‚
3. **å¼ºå¯¼æµ**ï¼šåœ¨ç”¨æˆ·è·å¾—ä»·å€¼çš„ç¬é—´ï¼ˆå¤åˆ¶æˆåŠŸæ—¶ï¼‰æ¤å…¥å…³æ³¨å¼•å¯¼ã€‚

---

## 2. æŠ€æœ¯æ¶æ„ (Tech Stack)

é‡‡ç”¨ **T3 Stack å˜ä½“**ï¼Œå®ç°å…¨æ ˆ Serverlessï¼Œ**å‰åå°ç»Ÿä¸€åœ¨ Vercel éƒ¨ç½²**ã€‚

* **å‰ç«¯æ¡†æ¶**: Next.js 14+ (App Router)
* **UI ç»„ä»¶**: Tailwind CSS + shadcn/ui (åˆ©ç”¨ v0.app ç”Ÿæˆ)
* **åç«¯é€»è¾‘**: Next.js Server Actions (æ— æœåŠ¡å™¨å‡½æ•°) + Middleware
* **æ•°æ®åº“**: Supabase (PostgreSQL)
* **é‰´æƒ**: Supabase Auth
* **éƒ¨ç½²**: Vercel (Frontend & Admin Dashboard one-click deploy)

---

## 3. è§’è‰²ä¸æƒé™ (RBAC)

| è§’è‰² | æ ‡è¯† | æƒé™æè¿° | å…³é”®é™åˆ¶ |
| --- | --- | --- | --- |
| **Visitor** | `role: null` | æµè§ˆåˆ—è¡¨/è¯¦æƒ…ã€æœç´¢ã€ç­›é€‰ | ä¸å¯è¿›å…¥åå° |
| **User** | `role: user` | æµè§ˆã€æœç´¢ã€å¤åˆ¶ã€ä¿®æ”¹æœ¬äººå¤´åƒ | ä¸å¯è¿›å…¥åå°ï¼Œ**å°ç¦çŠ¶æ€ä¸‹ç¦æ­¢ç™»å½•** |
| **Admin** | `role: admin` | **å…¨ç«™è¯»å†™**ã€è¿›å…¥ `/admin`ã€ç®¡ç†ç”¨æˆ·/å†…å®¹ | æ—  |

---

## 4. åŠŸèƒ½è¯¦ç»†è¯´æ˜ (Functional Specifications)

### 4.1 å‰å°ï¼šç”¨æˆ·ç«¯ (Client Side)

#### 4.1.1 é¦–é¡µ (Home)

* **Hero Header**:
* å¤§æ ‡é¢˜ + Sloganã€‚
* **å…¨å±€æœç´¢æ¡†**ï¼šå¤§åœ†è§’è®¾è®¡ï¼Œæ”¯æŒå¯¹ Title å’Œ Content çš„æ¨¡ç³Šæœç´¢ã€‚


* **æ ‡ç­¾å¿«æ·åŒº**:
* æ¨ªå‘æ»šåŠ¨æ¡ï¼ˆç§»åŠ¨ç«¯ï¼‰/ æ¢è¡Œå¹³é“ºï¼ˆPCç«¯ï¼‰ã€‚
* ç‚¹å‡»æ ‡ç­¾è·³è½¬è‡³ç­›é€‰ç»“æœé¡µã€‚


* **æç¤ºè¯åˆ—è¡¨ (List)**:
* **PCç«¯**ï¼š3åˆ—æˆ–4åˆ—ç€‘å¸ƒæµã€‚
* **ç§»åŠ¨ç«¯**ï¼š**å•åˆ—å¤§å¡ç‰‡**æ¨¡å¼ã€‚
* **å¡ç‰‡å†…å®¹**ï¼šå°é¢å›¾ï¼ˆå¦‚æœ‰ï¼‰ã€æ ‡é¢˜ã€ç®€è¿°ï¼ˆ2è¡Œï¼‰ã€åº•éƒ¨æ ‡ç­¾ Pillsã€çƒ­åº¦/æµè§ˆé‡ã€‚



#### 4.1.2 è¯¦æƒ…é¡µ (Detail)

* **å†…å®¹å±•ç¤º**:
* æ¸²æŸ“ Markdownï¼Œå¯¹ Code Block è¿›è¡Œé«˜äº®ã€‚
* **Mobile ä¼˜åŒ–**ï¼šä¾§è¾¹æ å…ƒæ•°æ®ï¼ˆä½œè€…/æ—¶é—´ï¼‰åœ¨ç§»åŠ¨ç«¯æ²‰åº•ï¼Œä¼˜å…ˆå±•ç¤ºå†…å®¹ã€‚


* **äº¤äº’æ ¸å¿ƒï¼šå¤åˆ¶ (Copy)**:
* **PCç«¯**ï¼šä½äºå†…å®¹æ¡†å³ä¸Šè§’çš„å›¾æ ‡æŒ‰é’®ã€‚
* **ç§»åŠ¨ç«¯**ï¼š**åº•éƒ¨å¸¸é©»æ‚¬æµ®æŒ‰é’® (Sticky Bottom)**ï¼Œæ–‡æ¡ˆâ€œä¸€é”®å¤åˆ¶â€ã€‚
* **åé¦ˆ (Toast)**ï¼šç‚¹å‡»åå¼¹å‡ºæç¤ºâ€”â€”â€œâœ… å¤åˆ¶æˆåŠŸï¼å…³æ³¨å…¬ä¼—å·å›å¤[Coze]è·å–è‡ªåŠ¨åŒ–ç‰ˆâ€ã€‚



#### 4.1.3 ç™»å½•/æ³¨å†Œ

* æ”¯æŒ GitHub / Google ä¸€é”®ç™»å½•ã€‚
* æ”¯æŒ é‚®ç®±/å¯†ç  ç™»å½•ï¼ˆä¸»è¦ç”¨äº Admin è´¦å·ï¼‰ã€‚

### 4.2 åå°ï¼šç®¡ç†ç«¯ (Admin Dashboard)

**å®‰å…¨ç­–ç•¥**ï¼šæ‰€æœ‰ `/admin/*` è·¯ç”±é€šè¿‡ Middleware æ‹¦æˆªï¼Œé Admin é‡å®šå‘è‡³é¦–é¡µã€‚

#### 4.2.1 æç¤ºè¯ç®¡ç† (Prompt CMS)

* **åˆ—è¡¨é¡µ**: å±•ç¤º IDã€å°é¢ç¼©ç•¥å›¾ã€æ ‡é¢˜ã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ã€‚
* **æ–°å¢/ç¼–è¾‘é¡µ**:
* æ ‡é¢˜ (Input)
* å°é¢å›¾ URL (Input - å¡«å…¥å¤–éƒ¨å›¾ç‰‡é“¾æ¥)
* ç®€ä»‹ (Textarea)
* å†…å®¹ (Markdown Editor + **é¢„è§ˆåŠŸèƒ½**)
* å…³è”æ ‡ç­¾ (Multi-select ä¸‹æ‹‰)
* çŠ¶æ€ (Switch: å…¬å¼€/ç§å¯†)



#### 4.2.2 æ ‡ç­¾ç®¡ç† (Tag Manager)

* **åŠŸèƒ½**: å¢åˆ æ”¹æŸ¥ã€‚
* **é€»è¾‘**: å¢åŠ  Slug å­—æ®µï¼ˆå¦‚ `writing`ï¼‰ï¼Œç”¨äºç”Ÿæˆ SEO å‹å¥½çš„ URL (`/tag/writing`)ã€‚
* **ä¿æŠ¤**: åˆ é™¤æ ‡ç­¾å‰ï¼Œæ£€æŸ¥ `prompt_tags` è¡¨ï¼Œè‹¥æœ‰å…³è”æ•°æ®åˆ™ç¦æ­¢åˆ é™¤ã€‚

#### 4.2.3 ç”¨æˆ·ç®¡ç† (User Manager)

* **åˆ—è¡¨é¡µ**: å¤´åƒã€æ˜µç§°ã€é‚®ç®±ã€çŠ¶æ€ã€‚
* **æ“ä½œ**:
1. **å°ç¦/è§£å°**: ä¿®æ”¹ `status` å­—æ®µã€‚
2. **åˆå§‹åŒ–å¯†ç **:
* ç‚¹å‡»â€œåˆå§‹åŒ–å¯†ç â€ -> äºŒæ¬¡ç¡®è®¤ã€‚
* è°ƒç”¨ Server Action -> å¼ºåˆ¶é‡ç½®å¯†ç ä¸º `123654`ã€‚
* è®¾ç½®æ•°æ®åº“ `must_change_password = true`ã€‚





---

## 5. æ•°æ®åº“è®¾è®¡ (Database Schema)

è¯·åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œä»¥ä¸‹ SQLï¼ŒåŒ…å«æœ€æ–°çš„å­—æ®µæ›´æ–°ã€‚

```sql
-- 1. ç”¨æˆ·è¡¨ (å¢å¼ºç‰ˆ)
create table profiles (
  id uuid references auth.users not null primary key,
  username text,
  avatar_url text,
  role text default 'user', -- 'user', 'admin'
  status text default 'active', -- 'active', 'banned'
  must_change_password boolean default false, -- å¼ºåˆ¶æ”¹å¯†æ ‡è®°
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- 2. æ ‡ç­¾è¡¨
create table tags (
  id bigint generated by default as identity primary key,
  name text unique not null, -- æ ‡ç­¾å
  slug text unique not null, -- URL åˆ«å
  color text default 'blue',
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- 3. æç¤ºè¯è¡¨ (å¢åŠ å°é¢å›¾)
create table prompts (
  id bigint generated by default as identity primary key,
  title text not null,
  description text,
  content text not null, -- Markdown
  cover_image_url text, -- æ–°å¢ï¼šå°é¢å›¾é“¾æ¥
  is_public boolean default true,
  author_id uuid references profiles(id),
  view_count bigint default 0,
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- 4. å…³è”è¡¨
create table prompt_tags (
  prompt_id bigint references prompts(id) on delete cascade,
  tag_id bigint references tags(id) on delete cascade,
  primary key (prompt_id, tag_id)
);

-- 5. å®‰å…¨ç­–ç•¥ (RLS)
alter table profiles enable row level security;
alter table tags enable row level security;
alter table prompts enable row level security;
alter table prompt_tags enable row level security;

-- åŸºç¡€è¯»ç­–ç•¥
create policy "Public prompts" on prompts for select using (is_public = true);
create policy "Public tags" on tags for select using (true);
create policy "Public prompt_tags" on prompt_tags for select using (true);
create policy "Self profile" on profiles for select using (auth.uid() = id);

-- å†™å…¥ç­–ç•¥ï¼šå»ºè®®åœ¨ Next.js Server Actions ä¸­ä½¿ç”¨ Service Role ç»•è¿‡ RLS 
-- æˆ–è€…é…ç½®è¯¦ç»†çš„ Admin Policy

```

---

## 6. éåŠŸèƒ½æ€§éœ€æ±‚ (NFR)

### 6.1 SEO ä¸åˆ†äº«

* **Sitemap**: æ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆ `sitemap.xml`ã€‚
* **Metadata**: è¯¦æƒ…é¡µåŠ¨æ€ç”Ÿæˆ Title (`[æ ‡é¢˜] - AIæç¤ºè¯åº“`) å’Œ OpenGraph Image (ç¤¾äº¤åˆ†äº«å¡ç‰‡)ã€‚

### 6.2 æ€§èƒ½ä½“éªŒ

* **Skeleton (éª¨æ¶å±)**: æ•°æ®åŠ è½½æœŸé—´å±•ç¤ºç°è‰²å ä½æ¡ï¼Œç¦æ­¢é¡µé¢æŠ–åŠ¨ã€‚
* **Empty State**: æœç´¢æ— ç»“æœæ—¶ï¼Œå±•ç¤ºâ€œæ¢ä¸ªè¯è¯•è¯•â€å¹¶æ¨èçƒ­é—¨æ ‡ç­¾ã€‚

### 6.3 éƒ¨ç½²ä¸è¿ç»´

* **ç¯å¢ƒéš”ç¦»**: æœ¬åœ°å¼€å‘ä½¿ç”¨ `.env.local`ï¼Œçº¿ä¸Š Vercel è®¾ç½®ç¯å¢ƒå˜é‡ã€‚
* **ç»Ÿä¸€åŸŸå**: å‰å° `yoursite.com`ï¼Œåå° `yoursite.com/admin`ã€‚

---

## 7. å¼€å‘æ‰§è¡Œè®¡åˆ’ (Execution Plan)

### Phase 1: åŸºå»º (Day 1)

1. åˆå§‹åŒ– Next.js + Tailwind + shadcn/uiã€‚
2. Supabase å»ºè¡¨ï¼Œæ‰‹åŠ¨å½•å…¥ä¸€æ¡ Admin æ•°æ®ã€‚
3. é…ç½® Middleware ä¿æŠ¤ `/admin`ã€‚

### Phase 2: ç”¨æˆ·ç«¯ UI (Day 2-3)

1. **v0.app ç”Ÿæˆ**: é¦–é¡µ Heroã€å¡ç‰‡(å•åˆ—/å¤šåˆ—å“åº”å¼)ã€è¯¦æƒ…é¡µã€‚
2. **æ•°æ®å¯¹æ¥**: å®ç° Supabase Client æŸ¥è¯¢ã€‚
3. **äº¤äº’å®ç°**: æœç´¢ã€ç­›é€‰ã€**åº•éƒ¨æ‚¬æµ®å¤åˆ¶æŒ‰é’®**ã€‚

### Phase 3: ç®¡ç†ç«¯åŠŸèƒ½ (Day 4-6)

1. **å¸ƒå±€**: ç®€å•çš„ä¾§è¾¹æ  + å†…å®¹åŒºã€‚
2. **CMS**: å®ç° Prompt å¢åˆ æ”¹ (å« Markdown é¢„è§ˆ)ã€‚
3. **User**: å®ç°åˆ—è¡¨å±•ç¤º + **å¯†ç é‡ç½® Server Action**ã€‚

### Phase 4: ä¸Šçº¿ (Day 7)

1. **Vercel éƒ¨ç½²**ã€‚
2. **æ•°æ®å¡«å……**: å½•å…¥ 20-50 æ¡é«˜è´¨é‡ Promptã€‚
3. **åŸ‹ç‚¹**: å¼€å¯ Vercel Analyticsã€‚

---

**ä¸‹ä¸€æ­¥æ“ä½œå»ºè®®ï¼š**

1. åˆå§‹åŒ–é¡¹ç›®ï¼š`npx create-next-app@latest ai-prompts --typescript --tailwind --eslint`
2. å®‰è£… UI åº“ï¼š`npx shadcn-ui@latest init`
3. å¼€å§‹ä½ çš„ç¼–ç ä¹‹æ—…ï¼